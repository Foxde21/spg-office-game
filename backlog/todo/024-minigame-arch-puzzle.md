# –ú–∏–Ω–∏-–∏–≥—Ä–∞: Architecture Puzzle

## –û–ø–∏—Å–∞–Ω–∏–µ
–ú–∏–Ω–∏-–∏–≥—Ä–∞ –≤ –∞—Ä–∫–∞–¥–Ω–æ–º –∞–≤—Ç–æ–º–∞—Ç–µ: –∏–≥—Ä–æ–∫—É –¥–∞—ë—Ç—Å—è –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∏ –Ω–∞–±–æ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–±–ª–æ–∫–æ–≤). –ù—É–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–ø–æ–ª–æ–∂–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Å–æ–µ–¥–∏–Ω–∏—Ç—å –∏—Ö —Å—Ç—Ä–µ–ª–∫–∞–º–∏, —á—Ç–æ–±—ã —Å–æ–±—Ä–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É. Drag-and-drop –º–µ—Ö–∞–Ω–∏–∫–∞. –ê–∫—Ç—É–∞–ª—å–Ω–æ –¥–ª—è AI Architect, Engineering, System Design –ø—É—Ç–µ–π.

## Definition of Ready (DOR)
- [x] –ó–∞–¥–∞—á–∞ —á–µ—Ç–∫–æ —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω–∞
- [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏
- [x] –û—Ü–µ–Ω–µ–Ω–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç—å (Story Points)
- [x] –ù–µ—Ç –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã/–∞—Å—Å–µ—Ç—ã

## Definition of Done (DOD)
- [ ] –ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–π–ª–≥–∞–π–¥—É
- [ ] –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –≤—Ä—É—á–Ω—É—é
- [ ] –ù–µ—Ç –∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
- [ ] –ö–æ–¥ –ø—Ä–æ—à–µ–ª —Ä–µ–≤—å—é (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏
1. Extends `MiniGameScene` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç framework –∏–∑ 022
2. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ ("–°–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–π —Å–∏—Å—Ç–µ–º—É —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π")
3. –ù–∞–±–æ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–±–ª–æ–∫–æ–≤) –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞ ‚Äî drag-and-drop
4. –†–∞–±–æ—á–∞—è –æ–±–ª–∞—Å—Ç—å ‚Äî —Å–µ—Ç–∫–∞, –∫—É–¥–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—é—Ç—Å—è –±–ª–æ–∫–∏
5. –ú–æ–∂–Ω–æ —Å–æ–µ–¥–∏–Ω—è—Ç—å –±–ª–æ–∫–∏ —Å—Ç—Ä–µ–ª–∫–∞–º–∏ (–∫–ª–∏–∫ –Ω–∞ –≤—ã—Ö–æ–¥ ‚Üí –∫–ª–∏–∫ –Ω–∞ –≤—Ö–æ–¥)
6. –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å" ‚Äî —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º
7. –ß–∞—Å—Ç–∏—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞: –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–≤—è–∑–∏ = –æ—á–∫–∏, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ = —à—Ç—Ä–∞—Ñ
8. –ú–∏–Ω–∏–º—É–º 5 –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –∑–∞–¥–∞—á –≤ –±–∞–Ω–∫–µ
9. –¢–∞–π–º–µ—Ä: 90 —Å–µ–∫—É–Ω–¥
10. –ü–æ–¥—Å–∫–∞–∑–∫–∏: –ø—Ä–∏ 30% –≤—Ä–µ–º–µ–Ω–∏ –º–æ–∂–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É (-20% –æ—á–∫–æ–≤)

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Scene: `src/scenes/minigames/ArchPuzzleGame.ts`

```typescript
export class ArchPuzzleGame extends MiniGameScene {
  getGameId(): string { return 'arch-puzzle' }
  getGameName(): string { return 'Architecture Puzzle' }
  getInstructions(): string { return '–°–æ–±–µ—Ä–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É! –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Å–æ–µ–¥–∏–Ω—è–π –∏—Ö.' }
  getMaxScore(): number { return 1000 }
}
```

### Data: `src/data/miniGames/archPuzzles.ts`

```typescript
export interface ArchPuzzle {
  id: string
  title: string
  description: string  // "–°–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–π —Å–∏—Å—Ç–µ–º—É —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –¥–ª—è e-commerce"
  difficulty: 'easy' | 'medium' | 'hard'
  components: ArchComponent[]
  correctConnections: ArchConnection[]
  hints: string[]
}

export interface ArchComponent {
  id: string
  name: string       // "API Gateway", "ML Model", "Cache", "Database"
  type: 'service' | 'database' | 'queue' | 'cache' | 'client' | 'ml-model'
  color: string      // —Ü–≤–µ—Ç –±–ª–æ–∫–∞ –ø–æ —Ç–∏–ø—É
}

export interface ArchConnection {
  from: string   // component id
  to: string     // component id
  label?: string // "REST", "gRPC", "event"
}
```

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–¥–∞—á:**

1. **–ü—Ä–æ—Å—Ç–∞—è: Web API**
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: Client, API Gateway, Auth Service, Database, Cache
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–≤—è–∑–∏: Client ‚Üí API Gateway ‚Üí Auth Service ‚Üí Database, API Gateway ‚Üí Cache

2. **–°—Ä–µ–¥–Ω—è—è: ML Pipeline**
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: Data Source, Feature Store, Training Pipeline, Model Registry, Serving API, Monitoring
- –°–≤—è–∑–∏: Data Source ‚Üí Feature Store ‚Üí Training Pipeline ‚Üí Model Registry ‚Üí Serving API ‚Üí Monitoring

3. **–°–ª–æ–∂–Ω–∞—è: –†–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: User Events, Event Queue, Feature Pipeline, User DB, Item DB, Candidate Generator, Ranker Model, A/B Testing, API, Cache
- –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–≤—è–∑–µ–π, –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

4. **RAG-—Å–∏—Å—Ç–µ–º–∞**
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: Documents, Embeddings, Vector DB, LLM, Retriever, Reranker, API Gateway, Cache

5. **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: API Gateway, User Service, Order Service, Payment Service, Message Queue, Database√ó3, Monitoring

### –ú–µ—Ö–∞–Ω–∏–∫–∞ drag-and-drop

Phaser 3 –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç drag —á–µ—Ä–µ–∑ `setInteractive({ draggable: true })`:

```typescript
component.setInteractive({ draggable: true })
this.input.setDraggable(component)

this.input.on('drag', (pointer, obj, dragX, dragY) => {
  obj.x = dragX
  obj.y = dragY
})
```

### –†–∏—Å–æ–≤–∞–Ω–∏–µ —Å–≤—è–∑–µ–π (—Å—Ç—Ä–µ–ª–æ–∫)

- –†–µ–∂–∏–º "—Ä–∏—Å–æ–≤–∞–Ω–∏–µ —Å–≤—è–∑–∏": –∫–ª–∏–∫ –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ‚Üí –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –ª–∏–Ω–∏–∏ ‚Üí –∫–ª–∏–∫ –Ω–∞ –¥—Ä—É–≥–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- –°–≤—è–∑—å —Ä–∏—Å—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `Phaser.GameObjects.Graphics`
- –°—Ç—Ä–µ–ª–∫–∞ –Ω–∞ –∫–æ–Ω—Ü–µ: —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫
- –ö–ª–∏–∫ –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–≤—è–∑—å ‚Äî —É–¥–∞–ª—è–µ—Ç –µ—ë

### –û—Ü–µ–Ω–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```typescript
function evaluateArchitecture(placed: Connection[], correct: Connection[]): number {
  let score = 0
  const maxScore = correct.length * 100

  for (const conn of placed) {
    if (correct.find(c => c.from === conn.from && c.to === conn.to)) {
      score += 100  // –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–≤—è–∑—å
    } else {
      score -= 30   // –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–≤—è–∑—å
    }
  }

  // –ë–æ–Ω—É—Å –∑–∞ –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–≤—è–∑–∏
  if (score === maxScore) score += 200

  return Math.max(0, score)
}
```

### UI

```
+--------------------------------------------------+
|  Architecture Puzzle         ‚è± 1:12   Score: 400 |
+--------------------------------------------------+
|  "–°–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–π —Å–∏—Å—Ç–µ–º—É —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –¥–ª—è           |
|   e-commerce –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã"                           |
|                                                    |
|   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                 |
|   ‚îÇ User    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí‚îÇ API      ‚îÇ                 |
|   ‚îÇ Events  ‚îÇ        ‚îÇ Gateway  ‚îÇ                 |
|   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 |
|                           ‚îÇ                        |
|                           ‚ñº                        |
|                      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  |
|                      ‚îÇ Ranker   ‚îÇ                  |
|                      ‚îÇ Model    ‚îÇ                  |
|                      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  |
|                                                    |
+--------------------------------------------------+
|  –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: [Cache] [Feature Store] [Item DB]    |
|                                                    |
|  [üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞]              [‚úì –ü—Ä–æ–≤–µ—Ä–∏—Ç—å]        |
+--------------------------------------------------+
```

### –ù–∞–≥—Ä–∞–¥—ã

- 3 –∑–≤–µ–∑–¥—ã (>80%): stress -12, respect +5
- 2 –∑–≤–µ–∑–¥—ã (>50%): stress -8, respect +2
- 1 –∑–≤–µ–∑–¥–∞ (>20%): stress -5

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- 022-game-room-minigame-framework

## –û—Ü–µ–Ω–∫–∞
- Story Points: 8
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: Low

## –ú–µ—Ç–∫–∏
- `feature`, `gameplay`
