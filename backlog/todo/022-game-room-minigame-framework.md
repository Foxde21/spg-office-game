# –ò–≥—Ä–æ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞ + Mini-Game Framework

## –û–ø–∏—Å–∞–Ω–∏–µ
–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –ª–æ–∫–∞—Ü–∏—é "Game Room" ‚Äî –∫–æ–º–Ω–∞—Ç–∞ —Å –∞—Ä–∫–∞–¥–Ω—ã–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∞–º–∏. –ö–∞–∂–¥—ã–π –∞–≤—Ç–æ–º–∞—Ç ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –º–∏–Ω–∏-–∏–≥—Ä—É. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Mini-Game Framework ‚Äî –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –º–∏–Ω–∏-–∏–≥—Ä (–æ—Ç–¥–µ–ª—å–Ω—ã–µ Phaser Scenes), —Å–∏—Å—Ç–µ–º—É –∑–∞–ø—É—Å–∫–∞/–∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–∏–Ω–∏-–∏–≥—Ä, –ø–æ–¥—Å—á—ë—Ç –æ—á–∫–æ–≤ –∏ –Ω–∞–≥—Ä–∞–¥. –ú–∏–Ω–∏-–∏–≥—Ä—ã —Å–Ω–∏–∂–∞—é—Ç —Å—Ç—Ä–µ—Å—Å –∏ –ø—Ä–æ–∫–∞—á–∏–≤–∞—é—Ç soft skills / –¥–∞—é—Ç –±–æ–Ω—É—Å—ã.

## Definition of Ready (DOR)
- [x] –ó–∞–¥–∞—á–∞ —á–µ—Ç–∫–æ —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω–∞
- [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏
- [x] –û—Ü–µ–Ω–µ–Ω–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç—å (Story Points)
- [x] –ù–µ—Ç –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã/–∞—Å—Å–µ—Ç—ã

## Definition of Done (DOD)
- [ ] –ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–π–ª–≥–∞–π–¥—É
- [ ] –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –≤—Ä—É—á–Ω—É—é
- [ ] –ù–µ—Ç –∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
- [ ] –ö–æ–¥ –ø—Ä–æ—à–µ–ª —Ä–µ–≤—å—é (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏
1. –õ–æ–∫–∞—Ü–∏—è Game Room –¥–æ–±–∞–≤–ª–µ–Ω–∞, –¥–æ—Å—Ç—É–ø–Ω–∞ –∏–∑ Open Space
2. –í Game Room –µ—Å—Ç—å 3-5 –∞—Ä–∫–∞–¥–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤ (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã)
3. –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è –º–∏–Ω–∏-–∏–≥—Ä–∞
4. –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å `MiniGameScene` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å –æ–±—â–∏–º lifecycle
5. –ú–∏–Ω–∏-–∏–≥—Ä–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ–≤–µ—Ä—Ö –æ—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä—ã (pause GameScene)
6. –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ ‚Äî —ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (score, rewards)
7. –ù–∞–≥—Ä–∞–¥—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ GameState (—Å—Ç—Ä–µ—Å—Å, —Ä–µ—Å–ø–µ–∫—Ç)
8. –†–µ–∫–æ—Ä–¥—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ SaveManager
9. –ó–∞–≥–ª—É—à–∫–∞ –º–∏–Ω–∏-–∏–≥—Ä—ã (placeholder) —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è framework

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –õ–æ–∫–∞—Ü–∏—è: Game Room

–î–æ–±–∞–≤–∏—Ç—å –≤ `src/types/Location.ts`:
```typescript
export type LocationId = '...' | 'game-room'
```

–î–æ–±–∞–≤–∏—Ç—å –≤ `src/data/locations.ts`:
```typescript
{
  id: 'game-room',
  name: 'Game Room',
  width: 1280,
  height: 720,
  backgroundColor: 0x1a1a2e,  // —Ç—ë–º–Ω—ã–π, –Ω–µ–æ–Ω–æ–≤—ã–π —Å—Ç–∏–ª—å
  doors: [
    {
      id: 'door-to-openspace',
      x: 100, y: 400,
      targetLocation: 'open-space',
      spawnX: 700, spawnY: 400,
      label: 'Open Space'
    }
  ],
  npcs: [],
  items: [],
  arcadeMachines: [  // –Ω–æ–≤—ã–π —Ç–∏–ø –æ–±—ä–µ–∫—Ç–∞
    { id: 'arcade-code-review', x: 300, y: 300, miniGameId: 'code-review', label: 'Code Review' },
    { id: 'arcade-arch-puzzle', x: 550, y: 300, miniGameId: 'arch-puzzle', label: 'Architecture' },
    { id: 'arcade-sprint-plan', x: 800, y: 300, miniGameId: 'sprint-planning', label: 'Sprint Planning' },
  ]
}
```

–î–≤–µ—Ä—å –∏–∑ Open Space –≤ Game Room:
```typescript
{ id: 'door-to-game-room', x: 600, y: 600, targetLocation: 'game-room', ... }
```

### –ê—Ä–∫–∞–¥–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç ‚Äî game object

```typescript
export class ArcadeMachine extends Phaser.GameObjects.Container {
  private sprite: Phaser.GameObjects.Sprite
  private label: Phaser.GameObjects.Text
  private glowEffect: Phaser.GameObjects.Graphics
  private miniGameId: string

  constructor(scene: Phaser.Scene, x: number, y: number, config: ArcadeMachineConfig)

  // –ü—Ä–∏ –∫–ª–∏–∫–µ ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–Ω–∏-–∏–≥—Ä—É
  private onInteract(): void {
    this.scene.game.events.emit('startMiniGame', this.miniGameId)
  }
}
```

–í–∏–∑—É–∞–ª: –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã–π "–∞–≤—Ç–æ–º–∞—Ç" —Å –Ω–µ–æ–Ω–æ–≤–æ–π –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π, –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–≥—Ä—ã –Ω–∞ "—ç–∫—Ä–∞–Ω–µ".

### MiniGameScene ‚Äî –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å

```typescript
export abstract class MiniGameScene extends Phaser.Scene {
  protected score: number = 0
  protected timeLimit: number = 60  // —Å–µ–∫—É–Ω–¥—ã
  protected timer: number = 0
  protected isPaused: boolean = false

  // Lifecycle
  abstract getGameId(): string
  abstract getGameName(): string
  abstract getInstructions(): string
  abstract setupGame(): void        // –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∏–≥—Ä—ã
  abstract updateGame(delta: number): void  // –ª–æ–≥–∏–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∏–≥—Ä—ã
  abstract getMaxScore(): number

  // –û–±—â–∏–π lifecycle (–Ω–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å)
  create(): void {
    this.showInstructions()   // 3 —Å–µ–∫—É–Ω–¥—ã –ø–æ–∫–∞–∑ –ø—Ä–∞–≤–∏–ª
    this.setupGame()
    this.startTimer()
  }

  update(time: number, delta: number): void {
    if (this.isPaused) return
    this.updateTimer(delta)
    this.updateGame(delta)
  }

  // –û–±—â–∏–µ –º–µ—Ç–æ–¥—ã
  protected addScore(points: number): void
  protected endGame(reason: 'timeout' | 'completed' | 'failed'): void
  protected showResults(): void  // —ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

  private showInstructions(): void   // "–ü—Ä–∞–≤–∏–ª–∞: ..." —Å –æ–±—Ä–∞—Ç–Ω—ã–º –æ—Ç—Å—á—ë—Ç–æ–º
  private startTimer(): void
  private updateTimer(delta: number): void

  // –†–∞—Å—á—ë—Ç –Ω–∞–≥—Ä–∞–¥
  private calculateRewards(): MiniGameRewards {
    const ratio = this.score / this.getMaxScore()
    return {
      stress: ratio > 0.5 ? -10 : -5,   // –º–∏–Ω–∏-–∏–≥—Ä—ã –≤—Å–µ–≥–¥–∞ —Å–Ω–∏–∂–∞—é—Ç —Å—Ç—Ä–µ—Å—Å
      respect: ratio > 0.8 ? 3 : ratio > 0.5 ? 1 : 0,
      achievement: ratio >= 1.0 ? `perfect-${this.getGameId()}` : undefined
    }
  }
}
```

### MiniGame Registry

```typescript
// src/data/miniGames.ts
export interface MiniGameConfig {
  id: string
  name: string
  description: string
  sceneKey: string       // –∫–ª—é—á Phaser Scene
  timeLimit: number      // —Å–µ–∫—É–Ω–¥—ã
  difficulty: 'easy' | 'medium' | 'hard'
  icon: string
}

export const MINI_GAMES: MiniGameConfig[] = [
  { id: 'code-review', name: 'Code Review', description: '–ù–∞–π–¥–∏ –±–∞–≥–∏ –≤ –∫–æ–¥–µ!', sceneKey: 'CodeReviewGame', timeLimit: 60, difficulty: 'medium', icon: 'üêõ' },
  { id: 'arch-puzzle', name: 'Architecture Puzzle', description: '–°–æ–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É', sceneKey: 'ArchPuzzleGame', timeLimit: 90, difficulty: 'hard', icon: 'üèó' },
  { id: 'sprint-planning', name: 'Sprint Planning', description: '–°–ø–ª–∞–Ω–∏—Ä—É–π —Å–ø—Ä–∏–Ω—Ç!', sceneKey: 'SprintPlanGame', timeLimit: 45, difficulty: 'easy', icon: 'üìã' },
]
```

### –ó–∞–ø—É—Å–∫ –º–∏–Ω–∏-–∏–≥—Ä—ã

–ü—Ä–æ—Ü–µ—Å—Å:
1. –ò–≥—Ä–æ–∫ –∫–ª–∏–∫–∞–µ—Ç –Ω–∞ –∞—Ä–∫–∞–¥–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç
2. `GameScene` —Å—Ç–∞–≤–∏—Ç—Å—è –Ω–∞ –ø–∞—É–∑—É (`this.scene.pause('GameScene')`)
3. –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è `MiniGameScene` (`this.scene.launch(sceneKey)`)
4. –ú–∏–Ω–∏-–∏–≥—Ä–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç —Å–≤–æ–π lifecycle
5. –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ ‚Äî —ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
6. –ò–≥—Ä–æ–∫ –Ω–∞–∂–∏–º–∞–µ—Ç "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"
7. `MiniGameScene` –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, `GameScene` –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
8. –ù–∞–≥—Ä–∞–¥—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ GameState

### –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–≤–Ω—É—Ç—Ä–∏ MiniGameScene)

```
+----------------------------------+
|       üêõ CODE REVIEW             |
|                                  |
|    Score: 850 / 1000             |
|    ‚≠ê‚≠ê‚≠ê (3 –∑–≤–µ–∑–¥—ã –∏–∑ 3)        |
|                                  |
|    –ù–∞–≥—Ä–∞–¥—ã:                      |
|    –°—Ç—Ä–µ—Å—Å: -10                   |
|    –£–≤–∞–∂–µ–Ω–∏–µ: +3                  |
|                                  |
|    –õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 920         |
|                                  |
|    [–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞]  [–í—ã—Ö–æ–¥]       |
+----------------------------------+
```

### –†–µ–∫–æ—Ä–¥—ã –≤ SaveData

–†–∞—Å—à–∏—Ä–∏—Ç—å `SaveData`:
```typescript
export interface SaveData {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ
  miniGameScores?: Record<string, { bestScore: number; playCount: number; lastPlayed: number }>
}
```

### Placeholder –º–∏–Ω–∏-–∏–≥—Ä–∞ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è framework)

–ü—Ä–æ—Å—Ç–∞—è "Click the Target" –∏–≥—Ä–∞:
- –ö—Ä—É–≥ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Å–ª—É—á–∞–π–Ω–æ–º –º–µ—Å—Ç–µ
- –ù–∞–∂–º–∏ –Ω–∞ –∫—Ä—É–≥ ‚Üí +10 –æ—á–∫–æ–≤
- 60 —Å–µ–∫—É–Ω–¥
- –ù—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è lifecycle framework

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ù–µ—Ç (–Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–∞ ‚Äî –º–∏–Ω–∏-–∏–≥—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∏ –≤ single-player)

## –û—Ü–µ–Ω–∫–∞
- Story Points: 8
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: Medium

## –ú–µ—Ç–∫–∏
- `feature`, `gameplay`, `ui`
